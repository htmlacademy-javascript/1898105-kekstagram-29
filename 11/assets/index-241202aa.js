(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function o(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(n){if(n.ep)return;n.ep=!0;const c=o(n);fetch(n.href,c)}})();const l=(e,t)=>Math.floor(Math.random()*(t-e+1))+e;function O(e,t){return e.length<=t}O("проверяемая строка",20);function B(e){const t=e.replaceAll(" ","").toLowerCase();let o="";for(let s=t.length-1;s>=0;s--)o+=t.at([s]);return t===o}B("Лёша на полке клопа нашёл ");function H(e){const t=e.toString();let o="";for(let s=0;s<t.length;s++)Number.isNaN(parseInt(t[s],10))||(o+=t[s]);return parseInt(o,10)}H("ECMAScript 2022");const p=e=>e.key==="Escape",X=5,K=/^#[a-zа-яё0-9]{1,19}$/i,V=document.querySelector("body"),z=document.querySelector(".img-upload__input "),_=document.querySelector(".img-upload__overlay"),G=document.querySelector(".img-upload__cancel"),g=document.querySelector(".img-upload__form"),f=g.querySelector(".text__hashtags"),j=document.querySelector(".text__description"),m=new Pristine(g,{classTo:"img-upload__field-wrapper",errorTextParent:"img-upload__field-wrapper"}),h=e=>e.trim().split(" ").filter(t=>!!t.length),R=e=>h(e).every(t=>K.test(t)),J=e=>h(e).length<=X,Q=e=>{const t=h(e).map(o=>o.toLowerCase());return t.length===new Set(t).size};m.addValidator(f,J,"Много хештегов",3,!0);m.addValidator(f,Q,"Не уникальный хештег",1,!0);m.addValidator(f,R,"Не правильный хештег",2,!0);g.addEventListener("submit",e=>{e.preventDefault(),m.validate()});const S=e=>{p(e)&&(e.preventDefault(),_.classList.add("hidden"),document.body.classList.remove("modal-open"))},W=()=>{_.classList.remove("hidden"),V.classList.add("modal-open"),document.addEventListener("keydown",S)},Y=()=>{_.classList.add("hidden"),document.body.classList.remove("modal-open"),g.reset(),m.reset(),document.removeEventListener("keydown",S)},Z=e=>{p(e)&&e.stopPropagation()},ee=e=>{p(e)&&e.stopPropagation()};z.addEventListener("change",W);G.addEventListener("click",Y);document.addEventListener("keydown",S);j.addEventListener("keydown",Z);f.addEventListener("keydown",ee);const T=[{name:"none",filter:"none",min:0,max:100,step:1,unit:""},{name:"chrome",filter:"grayscale",min:0,max:1,step:.1,unit:""},{name:"sepia",filter:"sepia",min:0,max:1,step:.1,unit:""},{name:"marvin",filter:"invert",min:0,max:100,step:1,unit:"%"},{name:"phobos",filter:"blur",min:0,max:3,step:.1,unit:"px"},{name:"heat",filter:"brightness",min:1,max:3,step:.1,unit:""}],r=T[0];let i=r;const I=document.querySelector(".img-upload__preview img"),te=document.querySelector(".effects"),y=document.querySelector(".effect-level__slider"),k=document.querySelector(".img-upload__effect-level"),ne=document.querySelector(".effect-level__value"),D=()=>i===r,oe=()=>{k.classList.remove("hidden")},L=()=>{k.classList.add("hidden")},F=()=>{y.noUiSlider.updateOptions({range:{min:i.min,max:i.max},step:i.step,start:r.max}),oe(),D()&&L()},ce=e=>{e.target.classList.contains("effects__radio")&&(i=T.find(t=>t.name===e.target.value),I.className=`effects__preview--${i.name}`,F())},se=()=>{const e=y.noUiSlider.get();I.style.filter=D()?r.filter:`${i.filter}(${e}${i.unit})`,ne.value=e},re=()=>{i=r,L(),F()};noUiSlider.create(y,{range:{min:r.min,max:r.max},start:r.max,step:r.step,connect:"lower"});L();te.addEventListener("change",ce);y.noUiSlider.on("update",se);const ie=25,ae=125,E=["Всё отлично!","В целом всё неплохо. Но не всё.","Когда вы делаете фотографию, хорошо бы убирать палец из кадра. В конце концов это просто непрофессионально.","Моя бабушка случайно чихнула с фотоаппаратом в руках и у неё получилась фотография лучше.","Я поскользнулся на банановой кожуре и уронил фотоаппарат на кота и у меня получилась фотография лучше.","Лица у людей на фотке перекошены, как будто их избивают. Как можно было поймать такой неудачный момент?!"],q={MIN:15,MAX:200},x={MIN:1,MAX:1e6},w={MIN:1,MAX:6},b=["Иван","Андрей","Мария","Николай","Елена","Ольга","Фигаро"],A=["Описание 1","Описание 2","Описание 3","Описание 4","Описание 5"],le=()=>{const e=[];for(let t=1;t<l(0,ae);t++)e.push({id:l(x.MIN,x.MAX),avatar:`img/avatar-${l(w.MIN,w.MAX)}.svg`,message:E[l(0,E.length-1)],name:b[l(0,b.length-1)]});return e},de=e=>({id:e,url:`photos/${e}.jpg`,description:A[l(0,A.length-1)],likes:l(q.MIN,q.MAX),comments:le()}),ue=()=>{const e=[];for(let t=1;t<=ie;t++)e.push(de(t));return e},me=document.querySelector(".social__comments"),pe=document.querySelector("#comment").content.querySelector(".social__comment"),M=e=>{const t=document.createDocumentFragment();e.forEach(o=>{const s=pe.cloneNode(!0),n=s.querySelector(".social__picture");n.src=o.avatar,n.alt=o.name,s.querySelector(".social__text").textContent=o.message,t.append(s)}),me.append(t)},v=document.querySelector(".big-picture"),ge=document.querySelector(".big-picture__img"),fe=ge.querySelector("img"),ye=document.querySelector(".social__caption"),_e=document.querySelector(".likes-count"),he=document.querySelector(".big-picture__cancel"),Se=document.querySelector(".comments-count"),u=document.querySelector(".comments-loader"),P=document.querySelector(".social__comment-count"),Le=()=>{v.classList.add("hidden"),document.querySelector(".social__comments").textContent="",document.body.classList.remove("modal-open")},ve=e=>{p(e)&&(e.preventDefault(),v.classList.add("hidden"),document.querySelector(".social__comments").textContent="",document.body.classList.remove("modal-open"))},Ce=e=>{u.classList.remove("hidden");let t=5;const{url:o,likes:s,comments:n,description:c}=e;n.length<=t&&(t=n.length,u.classList.add("hidden")),P.textContent=`${t} из ${n.length} комментариев`,v.classList.remove("hidden"),document.body.classList.add("modal-open"),fe.src=o,ye.textContent=c,_e.textContent=s,Se.textContent=n.length,M(n.slice(0,t));const a=()=>{u.classList.remove("hidden"),document.querySelector(".social__comments").textContent="",t=t+5,t>=n.length&&(t=n.length,u.classList.add("hidden")),M(n.slice(0,t)),P.textContent=`${t} из ${n.length} комментариев`};u.addEventListener("click",a),he.addEventListener("click",Le),document.addEventListener("keydown",ve)},Ee=document.querySelector(".pictures"),qe=document.querySelector("#picture").content,xe=qe.querySelector("a"),we=e=>{const{url:t,likes:o,comments:s,description:n}=e,c=xe.cloneNode(!0);c.querySelector(".picture__img").src=t,c.querySelector(".picture__img").alt=n,c.querySelector(".picture__comments").textContent=s.length,c.querySelector(".picture__likes").textContent=o;const a=$=>{$.preventDefault(),Ce(e)};return c.addEventListener("click",a),c},be=e=>{const t=document.createDocumentFragment();e.forEach(o=>{t.append(we(o))}),Ee.append(t)},Ae=document.querySelector(".scale"),C=document.querySelector(".scale__control--value"),Me=document.querySelector(".img-upload__preview img"),d={STEP:25,MAX:100,MIN:25,DEFAULT:100};C.value=`${d.DEFAULT}%`;const U=e=>{Me.style.transform=`scale(${e/d.DEFAULT})`,C.value=`${e}%`},N=e=>{const o=parseInt(C.value,10)+d.STEP*e;o<d.MIN||o>d.MAX||U(o)},Pe=e=>{e.target.classList.contains("scale__control--smaller")?N(-1):e.target.classList.contains("scale__control--bigger")&&N(1)},Ne=()=>{U(d.DEFAULT)};Ae.addEventListener("click",Pe);Ne();be(ue());re();
